<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caso: Carregando... | Observat√≥rio Social RJ</title>
    <meta name="description" content="Detalhes completos de um caso de inova√ß√£o social no Rio de Janeiro.">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/components.css">
    <style>
        .case-hero {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            padding: 100px 0 60px 0;
            margin-top: 70px;
            position: relative;
            overflow: hidden;
        }

        .case-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 40%, rgba(255,255,255,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 80%, rgba(255,255,255,0.05) 0%, transparent 50%);
        }

        .case-content {
            position: relative;
            z-index: 2;
        }

        .breadcrumb {
            margin-bottom: 20px;
            font-size: 14px;
            opacity: 0.8;
        }

        .breadcrumb a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
        }

        .breadcrumb a:hover {
            color: white;
        }

        .breadcrumb span {
            margin: 0 8px;
        }

        .case-title {
            font-size: clamp(28px, 4vw, 42px);
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.3;
            color: white !important;
        }

        .case-hero-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
            font-size: 16px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0.95;
        }

        .meta-icon {
            font-size: 18px;
        }

        .case-details {
            padding: 80px 0;
            background: var(--background-light);
        }

        .case-details-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 50px;
            margin-top: 40px;
        }

        .case-main-content {
            background: white;
            padding: 50px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
        }

        .content-section {
            margin-bottom: 40px;
        }

        .content-section:last-child {
            margin-bottom: 0;
        }

        .section-header {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .description {
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-light);
            margin-bottom: 25px;
        }

        .impact-list {
            list-style: none;
            margin: 20px 0;
        }

        .impact-list li {
            padding: 15px;
            background: var(--background-light);
            margin-bottom: 10px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--accent-color);
            font-size: 15px;
            color: var(--text-light);
            position: relative;
            padding-left: 50px;
        }

        .impact-list li::before {
            content: '‚úì';
            position: absolute;
            left: 18px;
            color: var(--accent-color);
            font-weight: bold;
            font-size: 16px;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .tag {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .case-sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .sidebar-card {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-light);
        }

        .sidebar-card h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: var(--text-dark);
            min-width: 80px;
        }

        .info-value {
            color: var(--text-light);
            text-align: right;
            flex: 1;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .status-completed {
            background: #e3f2fd;
            color: #1565c0;
        }

        .status-paused {
            background: #fff3e0;
            color: #ef6c00;
        }

        .contact-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .btn-contact {
            padding: 12px 20px;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 600;
            text-align: center;
            transition: var(--transition);
            font-size: 14px;
        }

        .btn-primary-contact {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary-contact:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-secondary-contact {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary-contact:hover {
            background: var(--primary-color);
            color: white;
        }

        .related-cases {
            padding: 80px 0;
            background: white;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .related-card {
            background: var(--background-light);
            padding: 25px;
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-light);
            transition: var(--transition);
        }

        .related-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            background: white;
        }

        .related-card h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .related-card p {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 15px;
        }

        .related-card .case-category-badge {
            font-size: 11px;
            padding: 4px 8px;
        }

        /* Actions Floating */
        .floating-actions {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 100;
        }

        .floating-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            font-size: 20px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-btn:hover {
            transform: scale(1.1);
        }

        .btn-share {
            background: var(--accent-color);
            color: white;
        }

        .btn-favorite {
            background: white;
            color: var(--text-light);
            border: 2px solid var(--border-light);
        }

        .btn-favorite.active {
            background: #e91e63;
            color: white;
            border-color: #e91e63;
        }

        .btn-edit {
            background: var(--primary-color);
            color: white;
        }

        @media (max-width: 1024px) {
            .case-details-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .case-main-content {
                padding: 30px;
            }

            .floating-actions {
                bottom: 20px;
                right: 20px;
            }
        }

        @media (max-width: 768px) {
            .case-hero-meta {
                grid-template-columns: 1fr;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }

            .case-main-content {
                padding: 25px;
            }

            .sidebar-card {
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <a href="../index.html" class="logo">
                <span class="logo-main">Design√°rio</span>
                <span class="logo-subtitle">OBSERVAT√ìRIO DE INOVA√á√ÉO SOCIAL</span>
            </a>
            
            <ul class="nav-links">
                <li><a href="../index.html">In√≠cio</a></li>
                <li><a href="casos.html">Casos</a></li>
                <li><a href="categorias.html">Categorias</a></li>
                <li><a href="metodologia.html">Metodologia</a></li>
                <li><a href="sobre.html">Sobre</a></li>
                <li><a href="contato.html">Contato</a></li>
            </ul>

            <div class="nav-actions">
                <!-- Ser√° atualizado dinamicamente pela fun√ß√£o updateHeaderForAuth -->
                <a href="login.html" class="btn-secondary-header">Entrar</a>
                <a href="registro.html" class="btn-header">Criar Conta</a>
                <a href="cadastro.html" class="btn-header auth-required" style="display: none;">Cadastrar Caso</a>
            </div>

            <button class="mobile-menu-btn" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>
    </header>

    <!-- Case Hero -->
    <section class="case-hero">
        <div class="container">
            <div class="case-content">
                <div class="breadcrumb">
                    <a href="../index.html">In√≠cio</a>
                    <span>‚Ä∫</span>
                    <a href="../index.html#casos">Casos</a>
                    <span>‚Ä∫</span>
                    <span id="breadcrumb-title">Carregando...</span>
                </div>
                
                <h1 class="case-title" id="case-title">Carregando...</h1>
                <p class="description" id="case-summary">Carregando descri√ß√£o...</p>
                
                <div class="case-hero-meta" id="case-meta">
                    <!-- Preenchido via JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Case Details -->
    <section class="case-details">
        <div class="container">
            <div class="case-details-grid">
                <!-- Conte√∫do Principal -->
                <div class="case-main-content">
                    <div class="content-section">
                        <h2 class="section-header">Sobre o Projeto</h2>
                        <div class="description" id="case-description">
                            Carregando descri√ß√£o completa...
                        </div>
                    </div>

                    <div class="content-section" id="impacts-section" style="display: none;">
                        <h2 class="section-header">Impactos Alcan√ßados</h2>
                        <ul class="impact-list" id="case-impacts">
                            <!-- Preenchido via JavaScript -->
                        </ul>
                    </div>

                    <div class="content-section" id="methodology-section" style="display: none;">
                        <h2 class="section-header">Metodologia</h2>
                        <div class="description" id="case-methodology">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>

                    <div class="content-section" id="challenges-section" style="display: none;">
                        <h2 class="section-header">Desafios Enfrentados</h2>
                        <div class="description" id="case-challenges">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>

                    <div class="content-section" id="tags-section">
                        <h2 class="section-header">Tags</h2>
                        <div class="tags-container" id="case-tags">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="case-sidebar">
                    <!-- Informa√ß√µes Gerais -->
                    <div class="sidebar-card">
                        <h3>Informa√ß√µes Gerais</h3>
                        <div id="case-info">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>

                    <!-- Contato -->
                    <div class="sidebar-card" id="contact-section" style="display: none;">
                        <h3>Entre em Contato</h3>
                        <p>Interessado em saber mais sobre este projeto?</p>
                        <div class="contact-buttons">
                            <a href="#" class="btn-contact btn-primary-contact" id="contact-email">Enviar E-mail</a>
                            <a href="#" class="btn-contact btn-secondary-contact" id="contact-website" style="display: none;">Visitar Site</a>
                        </div>
                    </div>

                    <!-- Dados do Cadastro -->
                    <div class="sidebar-card">
                        <h3>Dados do Cadastro</h3>
                        <div id="cadastro-info">
                            <!-- Preenchido via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Cases -->
    <section class="related-cases">
        <div class="container">
            <h2 class="section-title">Casos Relacionados</h2>
            <div class="related-grid" id="related-cases">
                <!-- Preenchido via JavaScript -->
            </div>
        </div>
    </section>

    <!-- Floating Actions -->
    <div class="floating-actions">
        <button class="floating-btn btn-share" title="Compartilhar" onclick="sharePage()">üîó</button>
        <button class="floating-btn btn-edit auth-required" title="Editar" onclick="editCase()" style="display: none;">‚úèÔ∏è</button>
    </div>

    <!-- Scripts -->
    <script src="../js/DataManager.js"></script>
    <script src="../js/AuthManager.js"></script>
    <script src="../js/HeaderManager.js"></script>
    <script src="../js/main.js"></script>
    <script>
        class CasoPage {
            constructor() {
                this.casoId = this.getCasoIdFromURL();
                this.caso = null;
                this.dataManager = null;
                this.authManager = null;
                this.init();
            }

            init() {
                this.dataManager = DataManager.getInstance();
                this.authManager = AuthManager.getInstance();
                
                if (this.casoId) {
                    this.loadCaso();
                } else {
                    this.showError('ID do caso n√£o encontrado na URL');
                }
                
                this.authManager.updateUI();
            }

            getCasoIdFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                return parseInt(urlParams.get('id'));
            }

            loadCaso() {
                try {
                    const casos = this.dataManager.getCasos();
                    this.caso = casos.find(c => c.id === this.casoId);
                    
                    if (this.caso) {
                        this.renderCaso();
                        this.loadRelatedCases();
                        this.updatePageMeta();
                    } else {
                        this.showError('Caso n√£o encontrado');
                    }
                } catch (error) {
                    console.error('Erro ao carregar caso:', error);
                    this.showError('Erro ao carregar dados do caso');
                }
            }

            getMockCasos() {
                return [
                    {
                        id: 1,
                        titulo: 'Horta Comunit√°ria da Provid√™ncia',
                        categoria: 'Meio Ambiente',
                        regiao: 'Centro',
                        descricaoResumo: 'Transforma√ß√£o de √°rea degradada em espa√ßo produtivo que beneficia 150 fam√≠lias com alimentos org√¢nicos e gera√ß√£o de renda.',
                        descricaoCompleta: 'O projeto Horta Comunit√°ria da Provid√™ncia nasceu da necessidade de aproveitar um espa√ßo urbano subutilizado no cora√ß√£o do Centro do Rio. Atrav√©s da mobiliza√ß√£o de moradores locais e apoio de ONGs ambientais, a iniciativa transformou uma √°rea de 500m¬≤ anteriormente degradada em um pr√≥spero espa√ßo de agricultura urbana. O projeto utiliza t√©cnicas de permacultura e agricultura org√¢nica, envolvendo diretamente os moradores da comunidade em todas as etapas do processo, desde o planejamento at√© a colheita. Al√©m da produ√ß√£o de alimentos, o espa√ßo funciona como centro de educa√ß√£o ambiental, oferecendo oficinas regulares sobre compostagem, cultivo sustent√°vel e alimenta√ß√£o saud√°vel.',
                        organizacao: 'Coletivo Verde Urbano',
                        beneficiarios: 150,
                        status: 'Em andamento',
                        dataInicio: '2023-03-15',
                        dataCadastro: '2024-08-15',
                        responsavelCadastro: 'Maria Silva - Extens√£o UFRJ',
                        contato: 'contato@verdereurbano.org.br',
                        site: 'https://verdereurbano.org.br',
                        impactos: [
                            'Produ√ß√£o de 2 toneladas de alimentos org√¢nicos mensais',
                            'Gera√ß√£o de renda complementar para 40 fam√≠lias',
                            'Capacita√ß√£o de 80 pessoas em t√©cnicas de cultivo urbano',
                            'Redu√ß√£o de 30% no descarte de res√≠duos org√¢nicos na comunidade'
                        ],
                        metodologia: 'Agricultura urbana participativa utilizando t√©cnicas de permacultura, compostagem de res√≠duos org√¢nicos locais e sistema de capta√ß√£o de √°gua da chuva. O projeto emprega metodologia de educa√ß√£o popular, onde os pr√≥prios moradores se tornam multiplicadores do conhecimento adquirido.',
                        desafios: 'Acesso limitado √† √°gua durante per√≠odos de seca, necessidade constante de forma√ß√£o t√©cnica para novos participantes, dificuldades de comercializa√ß√£o dos produtos e sustentabilidade financeira do projeto a longo prazo.',
                        tags: ['agricultura urbana', 'sustentabilidade', 'gera√ß√£o de renda', 'seguran√ßa alimentar', 'educa√ß√£o ambiental'],
                        fotos: [],
                        aprovado: true
                    },
                    {
                        id: 2,
                        titulo: 'Biblioteca M√≥vel Zona Oeste',
                        categoria: 'Educa√ß√£o',
                        regiao: 'Campo Grande',
                        descricaoResumo: '√înibus adaptado que leva literatura e atividades educativas para comunidades com baixo acesso a equipamentos culturais.',
                        descricaoCompleta: 'A Biblioteca M√≥vel √© uma iniciativa inovadora que quebra barreiras geogr√°ficas e sociais no acesso √† educa√ß√£o e cultura. Um √¥nibus especialmente adaptado percorre semanalmente diferentes pontos da Zona Oeste do Rio, oferecendo acesso gratuito a mais de 5.000 t√≠tulos, internet gratuita, oficinas de leitura e atividades culturais. O projeto atende prioritariamente √°reas com baixo IDH e pouco acesso a equipamentos culturais, levando n√£o apenas livros, mas tamb√©m promovendo encontros liter√°rios, conta√ß√£o de hist√≥rias, oficinas de escrita criativa e inclus√£o digital. A biblioteca m√≥vel funciona como um verdadeiro centro cultural itinerante, adaptando sua programa√ß√£o √†s necessidades espec√≠ficas de cada comunidade.',
                        organizacao: 'Instituto Leitura Para Todos',
                        beneficiarios: 800,
                        status: 'Em andamento',
                        dataInicio: '2022-06-01',
                        dataCadastro: '2024-08-12',
                        responsavelCadastro: 'Jo√£o Santos - Extens√£o UFRJ',
                        contato: 'biblioteca.movel@leituraparatodos.org',
                        impactos: [
                            'Atendimento a 800 pessoas mensalmente',
                            'Empr√©stimo de 1.200 livros por m√™s',
                            'Realiza√ß√£o de 40 oficinas educativas mensais',
                            'Cria√ß√£o de 12 clubes de leitura comunit√°rios'
                        ],
                        metodologia: 'Educa√ß√£o itinerante com foco na democratiza√ß√£o do acesso ao conhecimento, utilizando pedagogia freireana e metodologias participativas de anima√ß√£o cultural.',
                        desafios: 'Manuten√ß√£o constante do ve√≠culo, necessidade de expans√£o do acervo, forma√ß√£o de novos leitores em comunidades com baixo letramento e sustentabilidade financeira.',
                        tags: ['educa√ß√£o', 'literatura', 'inclus√£o digital', 'democratiza√ß√£o cultural'],
                        fotos: [],
                        aprovado: true
                    }
                ];
            }

            renderCaso() {
                // Atualizar t√≠tulo e meta
                document.title = `${this.caso.titulo} | Observat√≥rio Social RJ`;
                document.getElementById('breadcrumb-title').textContent = this.caso.titulo;
                document.getElementById('case-title').textContent = this.caso.titulo;
                document.getElementById('case-summary').textContent = this.caso.descricaoResumo;

                // Meta informa√ß√µes do hero
                const metaHTML = `
                    <div class="meta-item">
                        <span class="meta-icon">üìç</span>
                        <span>${this.caso.regiao}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-icon">üè¢</span>
                        <span>${this.caso.organizacao}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-icon">üë•</span>
                        <span>${this.caso.beneficiarios} benefici√°rios</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-icon">üìÇ</span>
                        <span>${this.caso.categoria}</span>
                    </div>
                `;
                document.getElementById('case-meta').innerHTML = metaHTML;

                // Descri√ß√£o completa
                document.getElementById('case-description').textContent = this.caso.descricaoCompleta;

                // Impactos
                if (this.caso.impactos && this.caso.impactos.length > 0) {
                    document.getElementById('impacts-section').style.display = 'block';
                    document.getElementById('case-impacts').innerHTML = 
                        this.caso.impactos.map(impacto => `<li>${impacto}</li>`).join('');
                }

                // Metodologia
                if (this.caso.metodologia) {
                    document.getElementById('methodology-section').style.display = 'block';
                    document.getElementById('case-methodology').textContent = this.caso.metodologia;
                }

                // Desafios
                if (this.caso.desafios) {
                    document.getElementById('challenges-section').style.display = 'block';
                    document.getElementById('case-challenges').textContent = this.caso.desafios;
                }

                // Tags
                if (this.caso.tags && this.caso.tags.length > 0) {
                    document.getElementById('case-tags').innerHTML = 
                        this.caso.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
                }

                // Informa√ß√µes gerais sidebar
                const statusClass = this.caso.status === 'Em andamento' ? 'status-active' : 
                                   this.caso.status === 'Conclu√≠do' ? 'status-completed' : 'status-paused';
                
                const infoHTML = `
                    <div class="info-item">
                        <span class="info-label">Status</span>
                        <span class="info-value"><span class="status-badge ${statusClass}">${this.caso.status}</span></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Categoria</span>
                        <span class="info-value">${this.caso.categoria}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Regi√£o</span>
                        <span class="info-value">${this.caso.regiao}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Organiza√ß√£o</span>
                        <span class="info-value">${this.caso.organizacao}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Benefici√°rios</span>
                        <span class="info-value">${this.caso.beneficiarios}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">In√≠cio</span>
                        <span class="info-value">${new Date(this.caso.dataInicio).toLocaleDateString('pt-BR')}</span>
                    </div>
                `;
                document.getElementById('case-info').innerHTML = infoHTML;

                // Contato
                if (this.caso.contato) {
                    document.getElementById('contact-section').style.display = 'block';
                    document.getElementById('contact-email').href = `mailto:${this.caso.contato}`;
                    
                    if (this.caso.site) {
                        const siteBtn = document.getElementById('contact-website');
                        siteBtn.style.display = 'block';
                        siteBtn.href = this.caso.site;
                        siteBtn.target = '_blank';
                    }
                }

                // Dados do cadastro
                const cadastroHTML = `
                    <div class="info-item">
                        <span class="info-label">Cadastrado em</span>
                        <span class="info-value">${new Date(this.caso.dataCadastro).toLocaleDateString('pt-BR')}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Respons√°vel</span>
                        <span class="info-value">${this.caso.responsavelCadastro}</span>
                    </div>
                `;
                document.getElementById('cadastro-info').innerHTML = cadastroHTML;
            }

            loadRelatedCases() {
                const casos = JSON.parse(localStorage.getItem('casos')) || this.getMockCasos();
                const related = casos
                    .filter(c => c.id !== this.casoId && c.categoria === this.caso.categoria)
                    .slice(0, 3);

                if (related.length > 0) {
                    const relatedHTML = related.map(caso => `
                        <div class="related-card">
                            <span class="case-category-badge badge-${this.getCategorySlug(caso.categoria)}">${caso.categoria}</span>
                            <h4>${caso.titulo}</h4>
                            <p>${caso.descricaoResumo.substring(0, 120)}...</p>
                            <a href="caso.html?id=${caso.id}" class="btn-outline btn-small">Ver Detalhes</a>
                        </div>
                    `).join('');

                    document.getElementById('related-cases').innerHTML = relatedHTML;
                } else {
                    document.querySelector('.related-cases').style.display = 'none';
                }
            }

            getCategorySlug(categoria) {
                const slugs = {
                    'Educa√ß√£o': 'education',
                    'Sa√∫de': 'health',
                    'Meio Ambiente': 'environment',
                    'Inclus√£o Social': 'social',
                    'Tecnologia Social': 'technology',
                    'Economia Solid√°ria': 'economy'
                };
                return slugs[categoria] || 'social';
            }

            updatePageMeta() {
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription) {
                    metaDescription.content = this.caso.descricaoResumo;
                }
            }

            showError(message) {
                document.querySelector('.case-hero .container').innerHTML = `
                    <div style="text-align: center; padding: 60px 0;">
                        <h1 style="color: white; margin-bottom: 20px;">Erro</h1>
                        <p style="color: rgba(255,255,255,0.9); margin-bottom: 30px;">${message}</p>
                        <a href="../index.html" class="btn-primary">Voltar ao In√≠cio</a>
                    </div>
                `;
                
                document.querySelector('.case-details').style.display = 'none';
                document.querySelector('.related-cases').style.display = 'none';
            }
        }

        // Fun√ß√µes globais para os floating buttons
        function sharePage() {
            if (navigator.share) {
                navigator.share({
                    title: document.title,
                    text: document.getElementById('case-summary').textContent,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    app.showNotification('Link copiado para a √°rea de transfer√™ncia!', 'success');
                });
            }
        }


        function editCase() {
            const casoId = new URLSearchParams(window.location.search).get('id');
            window.location.href = `cadastro.html?edit=${casoId}`;
        }

        // Inicializar p√°gina quando DOM estiver pronto
        document.addEventListener('DOMContentLoaded', () => {
            window.casoPage = new CasoPage();
        });
    </script>
</body>
</html>